!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Fetch2=e()}(this,function(){"use strict";function t(t){return"[object Array]"===Object.prototype.toString.call(t)}function e(t){var n=[];for(var o in t)"object"===u(t[o])?n.push({label:o,child:e(t[o])}):n.push({label:o,val:t[o]});return n}function n(t){function e(t,o){o=o||"";for(var r in t)t[r].child?o?e(t[r].child,o+"["+t[r].label+"]"):e(t[r].child,t[r].label):o?n.push(o+"["+t[r].label+"]="+t[r].val):n.push(t[r].label+"="+t[r].val)}var n=[];return e(t),n}function o(o,r){if("object"===(void 0===o?"undefined":u(o))&&!t(o)){var i=n(e(o)).join("&");return r?encodeURI(i):i}return""}function r(){}var i="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f=(function(){function t(t){this.value=t}function e(e){function n(r,i){try{var u=e[r](i),f=u.value;f instanceof t?Promise.resolve(f.value).then(function(t){n("next",t)},function(t){n("throw",t)}):o(u.done?"return":"normal",u.value)}catch(t){o("throw",t)}}function o(t,e){switch(t){case"return":r.resolve({value:e,done:!0});break;case"throw":r.reject(e);break;default:r.resolve({value:e,done:!1})}(r=r.next)?n(r.key,r.arg):i=null}var r,i;this._invoke=function(t,e){return new Promise(function(o,u){var f={key:t,arg:e,resolve:o,reject:u,next:null};i?i=i.next=f:(r=i=f,n(t,e))})},"function"!=typeof e.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(e.prototype[Symbol.asyncIterator]=function(){return this}),e.prototype.next=function(t){return this._invoke("next",t)},e.prototype.throw=function(t){return this._invoke("throw",t)},e.prototype.return=function(t){return this._invoke("return",t)}}(),{url:function(t,e,n){var r=o(e,n);if(t.indexOf("?")>-1){var i=t.split("?");return r?t.replace(/&$/,"")+(i[1]?"&":"")+r:t}return r?t+"?"+r:t},stringify:function(t,e){return o(t,e)}}),c="object"===("undefined"==typeof self?"undefined":u(self))&&self.self===self&&self,a="object"===(void 0===i?"undefined":u(i))&&i.global===i&&i,s=c||a,p=s.fetch||null,l=s.FormData;return r.prototype.request={interceptors:[],use:function(t){return"function"!=typeof t?(console.warn("the interceptors must be a function"),!1):(this.interceptors.push(t),!0)}},r.prototype.response={interceptors:[],use:function(t){return"function"!=typeof t?(console.warn("the interceptors must be a function"),!1):(this.interceptors.push(t),!0)}},r.prototype.fetch=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=this;"GET"!==(e=e?e.toUpperCase():"GET")&&"HEAD"!==e||delete n.body;var r="object"===u(n.body)&&!(n.body instanceof l);(r||"string"==typeof n.body)&&(n.headers||(n.headers={}),n.headers["Content-Type"]="application/x-www-form-urlencoded"),r&&(n.body=f.stringify(n.body)),n.method=e;var i=n;return new Promise(function(e,r){function u(){function u(t){function n(){if(i>=r.length)return e(t),!0;var o=r[i];i++,o&&"function"==typeof o&&o(t,n)}var r=o.response.interceptors;if(0===r.length)return e(t),!0;var i=0;n()}var c=f.url(t,i.params);p(c,i).then(function(t){switch(n.type){case"text":t.text().then(function(e){t.data=e,u(t)});break;case"blob":t.blob().then(function(e){t.data=e,u(t)});break;case"arrayBuffer":t.arrayBuffer().then(function(e){t.data=e,u(t)});break;default:t.json().then(function(e){t.data=e,u(t)}).catch(function(t){return r(t)})}}).catch(function(t){r(t)})}function c(){if(s>=a.length)return u(),!0;var t=a[s];s++,t&&"function"==typeof t&&t(i,c)}var a=o.request.interceptors;if(0===a.length)return u(),!0;var s=0;c()})},r.prototype.URLParams=f,r.prototype.init=function(t,e){p=t,l=e},r.prototype.Fetch2=r,r.prototype.get=function(t,e){return this.fetch(t,"GET",e)},r.prototype.post=function(t,e){return this.fetch(t,"POST",e)},r.prototype.put=function(t,e){return this.fetch(t,"PUT",e)},r.prototype.delete=function(t,e){return this.fetch(t,"DELETE",e)},r.prototype.head=function(t,e){return this.fetch(t,"HEAD",e)},r.prototype.patch=function(t,e){return this.fetch(t,"PATCH",e)},new r});
//# sourceMappingURL=fetch2.js.map
